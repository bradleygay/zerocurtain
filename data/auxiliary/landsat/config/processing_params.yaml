# ============================================================================
# Landsat Processing Parameters
# Detailed parameter specifications for each processing stage
# ============================================================================

# Stage 1: Initial Download
download:
  region_processing:
    order: "sequential"  # sequential, parallel, adaptive
    priority: "coverage_first"  # coverage_first, speed_first, balanced
    
  scene_selection:
    prefer_recent: true
    prefer_low_cloud: true
    avoid_night: true
    avoid_edge_pixels: true
    
  bandwidth:
    max_concurrent_requests: 100
    request_timeout: 300  # seconds
    rate_limit: 2.0  # requests per second

# Stage 2: Quality Control
quality_control:
  filters:
    cloud_cover:
      method: "qa_band"  # qa_band, algorithm, both
      threshold: 10.0
      
    geometric:
      check_bounds: true
      check_projection: true
      
    radiometric:
      check_saturation: true
      saturation_threshold: 0.05  # 5% of pixels
      
  corrections:
    atmospheric: true
    topographic: false  # Applied later with ArcticDEM
    bidirectional: false

# Stage 3: Gap Identification
gap_identification:
  spatial_analysis:
    method: "grid_based"  # grid_based, cluster_based, hybrid
    grid_size: 5.0  # degrees
    
  gap_types:
    empty_cells:
      detect: true
      min_size: 1  # cells
      
    boundary_gaps:
      detect: true
      buffer_distance: 1.0  # degrees
      
    swath_gaps:
      detect: true
      min_width: 0.1  # degrees
      max_width: 2.0  # degrees
      
  visualization:
    generate_maps: true
    map_resolution: 300  # dpi
    colormap: "viridis"

# Stage 4: Gap Filling
gap_filling:
  empty_cells:
    strategy: "direct_query"
    relaxed_cloud_threshold: 15.0
    expand_temporal_window: true
    temporal_expansion_days: 30
    
  boundary_gaps:
    strategy: "extended_search"
    overlap_distance: 2.0  # degrees
    use_adjacent_paths: true
    
  swath_gaps:
    strategy: "scene_optimization"
    optimize_scene_selection: true
    cross_track_expansion: 1.0  # degrees
    use_off_nadir: false

# Stage 5: Data Merging
merging:
  duplicate_handling:
    method: "spatial_temporal"  # spatial, temporal, spatial_temporal
    spatial_tolerance: 0.0001  # degrees (~10 meters)
    temporal_tolerance: 1  # days
    resolution_strategy: "keep_best_quality"
    
  priority_order:
    - "lowest_cloud_cover"
    - "most_recent"
    - "best_sun_angle"
    
  validation:
    check_consistency: true
    check_coverage: true
    generate_report: true

# Stage 6: Final Processing
final_processing:
  coordinate_precision: 6  # decimal places
  value_precision: 2  # decimal places for band values
  
  statistics:
    calculate_per_region: true
    calculate_temporal: true
    calculate_spectral: true
    
  metadata:
    embed_in_file: true
    separate_json: true
    include_lineage: true

# Performance Tuning
performance:
  memory:
    max_chunk_size: 10000  # rows
    use_memory_mapping: true
    garbage_collection_frequency: 100  # iterations
    
  io:
    buffer_size: 8192  # bytes
    use_async_io: false
    compression_level: 3
    
  parallelization:
    strategy: "process_pool"  # thread_pool, process_pool, hybrid
    chunk_size: "auto"
    load_balancing: "dynamic"

# Error Handling
error_handling:
  retry_strategies:
    network_error:
      max_retries: 5
      backoff: "exponential"
      
    ee_error:
      max_retries: 10
      backoff: "exponential"
      
    memory_error:
      max_retries: 2
      reduce_batch_size: true
      
  recovery:
    save_partial_results: true
    checkpoint_interval: 100  # scenes
    allow_resume: true
    
  reporting:
    log_all_errors: true
    create_error_report: true
    notify_on_critical: false

# Testing and Validation
testing:
  dry_run:
    enabled: false
    max_regions: 2
    max_scenes_per_region: 10
    
  validation:
    check_band_ranges: true
    check_coordinates: true
    check_dates: true
    
  benchmarking:
    enabled: false
    profile_memory: true
    profile_cpu: true